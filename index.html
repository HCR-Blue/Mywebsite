<!DOCTYPE html>
<html>

    <head>
        <title>Afghanistan Airdrop</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <style>
            body {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: flex-start;
                min-height: 80vh;
                margin: 0;
                font-family: OCR-A BT, sans-serif;
                background: linear-gradient(365deg, #b15500, #b15500, #d05800, #bfcfff, #0000a5, #00f);
                background-size: auto;
                background-size: 100% 168%;
                user-select: none;
                /*            animation: colorChange 10s ease infinite;*/
            }

            @keyframes colorChange {
                0% {
                    background-position: 0% 50%;
                }

                50% {
                    background-position: 100% 50%;
                }

                100% {
                    background-position: 0% 50%;
                }
            }

            .aflogo {
                display: block;
                margin: 0 auto;
                width: 270px;
                height: auto;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
                pointer-events: auto;
                -webkit-tap-highlight-color: transparent;
            }

            .aflogo:active {
                transform: scale(0.95);
                object-fit: contain;
            }

            .aflogo:focus {
                outline: none;
            }

            #tap-count {
                font-size: 25px;
                font-weight: bold;
                margin: 0;
            }

            button {
                font-family: Exotc350 Bd BT;
                margin: 0 10px;
                padding: 10px 20px;
                font-size: 18px;
                background-color: #ecb500;
                color: #fff;
                /* border: none; */
                border: 0.9px solid rgb(218, 218, 218);
                border-radius: 20px;
                cursor: pointer;
            }

            button:hover {
                background-color: #fd7b17;
            }

            .screen {
                /* position: absolute;
                top: 5%;
                left: 50%;
                transform: translate(-50%, 0); */
                text-align: center;
                padding-top: 20px;
                width: 100%;
                max-width: 600px;
                display: none;
            }

            .screen.active {
                display: block;
            }

            .button-container {
                position: fixed;
                bottom: 4%;
                left: 50%;
                transform: translateX(-50%);
                display: flex;
            }


            /*Screen 2*/

            .invite-link-container {
                margin-top: 30px;
                text-align: center;
            }

            .invite-link-container:focus {
                outline: none;
            }

            .invite-link-box {
                display: flex;
                justify-content: center;
                align-items: center;
                margin-top: 10px;
                margin-bottom: 15px;

            }

            .invite-link-box:focus {
                outline: none;
            }

            #invite-link-input {
                padding: 8px 12px;
                font-size: 16px;
                border: 1px solid #ccc;
                border-radius: 4px;
                width: 250px;
                margin-right: 10px;
            }

            #copy-link-btn {
                padding: 8px 16px;
                font-size: 16px;
                background-color: #500000;
                color: #D8B625;
                border: none;
                border-radius: 4px;
                cursor: pointer;
            }

            #copy-link-btn:focus {
                outline: none;
            }

            .tasks {
                position: absolute;
                top: 20%;
                right: 5%;
                display: flex;
                flex-direction: column;
            }

            .tasks .prize {
                /* border: 4px dotted #ffff00;
                background: #ff000090;
                padding: 4px; */
                font-size: 80px;
            }

            .ligue-range {
                display: flex;
                justify-content: center;

            }

            .task-list {
                display: flex;
                justify-content: space-between;
                border: 1px solid #fff;
                border-radius: 10px;
                background: #0000006a;
                color: #ffcc00;
                align-items: baseline;
                margin-top: 5px;
            }

            #is_task_done {
                font-size: 30px;
                padding: 10px;
            }

            #task_go {
                font-size: 30px;
                padding: 10px;
                color: #ff4800;
                /* background: #ffc4006d; */
            }

            .frind-list {
                display: flex;
                justify-content: space-between;
                /* border: 1px solid #fff; */
                /* border-radius: 10px; */
                background: #0000006a;
                color: #ffcc00;
                align-items: baseline;
                margin-top: 5px;
            }

            #is_frind_done {
                font-size: 30px;
                padding: 10px;
            }

            #frind_go {
                font-size: 30px;
                padding: 10px;
                color: #fff;
                /* background: #ffc4006d; */
            }

            .wallet {
                display: flex;
                flex-direction: column;
                justify-content: center;
                position: absolute;
                top: 1%;
                left: 5%;
            }

            .wallet-icon {
                font-size: 50px;
                background: #ffffff1a;
                text-align: center;
            }

            .wallet-icon:hover {
                background-color: #ffffff82;
            }

            /* anime */
            .tap-animation {
                position: absolute;
                font-size: 25px;
                font-weight: bold;
                color: #ffffff;
                opacity: 0;
                transform: scale(2);
                animation: tapAnimation 1s ease-out;
                text-shadow: 0 0 10px rgba(10, 255, 255, 0.8), 0 0 20px rgba(20, 255, 25, 0.6), 0 0 30px rgba(25, 255, 25, 0.4), 0 0 40px rgba(10, 255, 20, 0.2);
            }

            @keyframes tapAnimation {
                0% {
                    opacity: 1;
                    transform: scale(2);
                    transform: translateY(-5px);

                }

                50% {
                    opacity: 1;
                    transform: scale(1.5);
                    transform: translateY(-100px);
                }

                100% {
                    opacity: 0;
                    transform: scale(1);
                    transform: translateY(-160px);
                }
            }

            #tap-count.animate {
                animation: count-up 1s ease;
            }

            @keyframes tap-animation {
                0% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(0.8);
                }

                100% {
                    transform: scale(1);

                }
            }

            /* .tap-cursor:active {
                animation: tap-animation 0.2s ease -in -out;
            } */

            #game-canvas {
                border: none;
                /* background: linear-gradient(365deg, #b1550000, #1600b1, #d0580000, #bfcfff00, #0000a500, #00f0); */
                height: 60vh;
                width: 100vw;
                background-color: bisque;
            }
        </style>
    </head>

    <body>

        <!-- <button id="open-app-btn">Open App</button> -->
        <div id="screen1" class="screen active">
            <h2 style="color: rgb(255, 255, 255); font-size:37px; font-weight: bold;" id="tap-count">0.000</h2>
            <h2 id="ligues" style="color: rgb(255, 199, 45)"> <code> <</code> Gold <code>></code> </h2>
            <div id="play_page">
                <button id="play-btn">play</button>
            </div>
            <canvas id="game-canvas" width="400" height="600"></canvas>
        </div>

        <div id="screen2" class="screen">
            <h1 style="color:#fff">List of your friends</h1>
            <button id="screen2-text">Join us</button>
            <!-- <p id="screen2-text">This is the second screen.</p> -->

            <div class="invite-link-container">
                <h2>
                    <p style="color:#fff" id=friendCount>0 Friends</p>
                </h2>
                <div class="invite-link-box">
                    <input type="text" id="invite-link-input" value="https://t.me/aftribe" readonly>
                    <button id="copy-link-btn" style="outline: none;">🔗</button>
                </div>
            </div>
            <div style="display: flex; flex-direction:column;">
                <div class="frind-list">
                    <span id="is_frind_done">👤</span>
                    <p>RashidBik</p>
                    <span id="frind_go">700</span>
                </div>
                <div class="frind-list">
                    <span id="is_frind_done">👤</span>
                    <p>Ghafor</p>
                    <span id="frind_go">25000</span>
                </div>
            </div>
        </div>

        <div style="color:#fff" id="screen3" class="screen">
            <h1>Increase Mining</h1>
            <p id="screen3-text" style="color:#ffa600; font-size:30px; font-weight:bold;">x2</p>
            <p>Multiple your mining rate</p>
            <img src="" alt="">
            <small>0.002BNB</small>

            <address>idfknsdafjkddfj-980999</address>
            <div style="font-size:200px;">
                🧭
            </div>
        </div>

        <div class="button-container">
            <button id="button2" style="outline: none;">Friends 👥</button>
            <button id="button1" style="outline: none;">Mine ⛏️</button>
            <button id="button3" style="outline: none;">Boost 🚀</button>
        </div>

        <div id="ligues-screen" class="screen">
            <p style="font-size:40px; font-weight:bold; color: #fff;">Gold League</p>
            <p style="font-size: 18px; color:#ffd61e; font-weight:bold;  ">You owned this cup</p>
            <div id="leaderboardData">
                <h3>Leaderboard</h3>
                <ol id="leaderboard-list"></ol>
            </div>
            <div style="display: flex; flex-direction: column;">
                <div class="ligue-range">
                    <!-- <p>😑</p> -->
                    <div style="height: 20px; width:200px; font-size:50px; background-color:pink;
                    border-radius: 10px;
                    ">
                        <div id="ligue-range-count"
                            style=" border-radius: 10px 0 0 10px; background-color:red; height:19px; width:1px;">
                        </div>
                    </div>
                    <!-- <p>🍷</p> -->
                </div>
                <p style="font-size:20px; color: #fff; font-weight:bold;">433/ <span style="color:green;">500</span></p>
            </div>
        </div>
        <div id="tasks-screen" class="screen">
            <div>
                <p style="font-size:40px; font-weight:bold; color: #fff;">Special tasks</p>
                <p style="font-size: 18px; color:#ffd61e; font-weight:bold;  ">You can earn rewards for each task</p>
            </div>
            <div class="task-list">
                <span id="is_task_done">50 🎊</span>
                <p>subscribe to our youtube channel</p>
                <span id="task_go">Go</span>
            </div>
            <div class="task-list">
                <span id="is_task_done">70 🎊</span>
                <p>join our conversation</p>
                <span id="task_go">✅</span>
            </div>


        </div>
        <div id="wallet-screen" class="screen">
            <h2 style="color: #fff;">COMMING SOON...</h2>
        </div>

        <div id="tasks" class="tasks">
            <span class="prize">🎁</span>
        </div>
        <div id="wallet" class="wallet">
            <span class="wallet-icon">💼</span>
            <p class="wallet_text"
                style="text-align:center; font-size:10px;  background-color: #ffffff71;  margin: 0px; padding: 0px 2px 0 2px;">
                Connect
                Wallet</p>
        </div>

        <script>
            const button1 = document.getElementById('button1');
            const button2 = document.getElementById('button2');
            const button3 = document.getElementById('button3');
            const ligues = document.getElementById('ligues');
            const ligue_range_count = document.getElementById('ligue-range-count')
            const tasks = document.getElementById('tasks');
            const wallet = document.getElementById('wallet');

            // CANVAS ------------PART
            const play_page = document.getElementById('play_page')
            const canvas = document.getElementById('game-canvas');
            const ctx = canvas.getContext('2d');
            const tapCountDisplay = document.getElementById('tap-count');
            let zeropoint = parseFloat(0.001);
            let tapCount = 0.000;

            button1.addEventListener('click', () =>
            {
                showScreen('screen1');
                tasks.style.display = 'flex';
                wallet.style.display = 'flex';
                playCanvas()
            });

            button2.addEventListener('click', () =>
            {
                showScreen('screen2');
                tasks.style.display = 'none';
                wallet.style.display = 'none';
                document.getElementById('screen2-text').textContent = 'Join our channel';
                function shareTelegramBotLink()
                {
                    const botLink = 'https://t.me/Aftribe_bot';

                    // Check if the user has a sharing option available
                    if (navigator.share)
                    {
                        navigator.share({
                            text: 'Check out AfTribeBot!',
                            url: botLink
                        })
                            .then(() =>
                            {
                                console.log('Link shared successfully!');
                            })
                            .catch((error) =>
                            {
                                console.error('Error sharing link:', error);
                                // Fallback to copying the link to the clipboard
                                navigator.clipboard.writeText(botLink)
                                    .then(() =>
                                    {
                                        alert('Telegram bot link copied to clipboard!');
                                    })
                                    .catch((error) =>
                                    {
                                        console.error('Error copying link:', error);
                                    });
                            });
                    } else
                    {
                        // Fallback to copying the link to the clipboard
                        navigator.clipboard.writeText(botLink)
                            .then(() =>
                            {
                                alert('Telegram bot link copied to clipboard!');
                            })
                            .catch((error) =>
                            {
                                console.error('Error copying link:', error);
                            });
                    }
                }

                let copyLinkBtn = document.getElementById('copy-link-btn').addEventListener('click', shareTelegramBotLink);


                function JoinUs(screenId)
                {
                    window.open('https://t.me/aftribe', '_blank');
                }

                document.getElementById('screen2-text').addEventListener('click', JoinUs);
                // Get the input field and the copy button
                const inviteLinkInput = document.getElementById('invite-link-input');

                // Add a click event listener to the copy button
                copyLinkBtn.addEventListener('click', () =>
                {
                    // Select the text in the input field
                    inviteLinkInput.select();
                    inviteLinkInput.setSelectionRange(0, 99999); // For mobile devices

                    // Copy the selected text to the clipboard
                    navigator.clipboard.writeText(inviteLinkInput.value);

                    // Show a success message or perform any other desired action
                    alert('Invite link copied to clipboard!');
                });

            });
            button3.addEventListener('click', () =>
            {
                showScreen('screen3');
                tasks.style.display = 'none';
                wallet.style.display = 'none';
                document.getElementById('screen3-text').textContent = 'x2';
            });
            ligues.addEventListener('click', () =>
            {
                showScreen('ligues-screen')
                tasks.style.display = 'none';
                wallet.style.display = 'none';
                let COINS = '160px';
                ligue_range_count.style.width = COINS;
            })
            tasks.addEventListener('click', () =>
            {
                showScreen('tasks-screen');
                tasks.style.display = 'none';
                wallet.style.display = 'none';
            })
            wallet.addEventListener('click', () =>
            {
                showScreen('wallet-screen');
                tasks.style.display = 'none';
            })
            function showScreen(screenId)
            {
                const screens = document.querySelectorAll('.screen');
                screens.forEach(screen => screen.classList.remove('active'));
                document.getElementById(screenId).classList.add('active');
            }


            function playCanvas(params)
            {
                // Game variables
                let character = {
                    x: 50,
                    y: canvas.height - 50,
                    width: 20,
                    height: 50,
                    velocity: 0,
                    gravity: 1,
                    jumpForce: -15
                };

                let obstacles = [];
                let powerUps = [];
                let score = 0;
                let gameOver = false;
                let isJumping = false;
                let jumpHeight = 350;
                let jumpDuration = 0.5;
                let jumpStartTime = 0;
                let powerUpDuration = 10000; // 10 seconds
                let currentLevel = 1;
                let obstacleSpeed = 5;
                let powerUpSpeed = 3;
                let obstacleSpawnChance = 0.01;
                let powerUpSpawnChance = 0.04;
                let highScore = 0; // Initialize high score
                let leaderboardData = [];

                canvas.style.display = 'none';
                const playBtn = document.getElementById('play-btn');

                console.log(gameOver);
                playBtn.addEventListener('click', () =>
                {
                    play_page.style.display = 'none';
                    canvas.style.display = 'block';
                    character.x = 50;
                    character.y = canvas.height - 50;
                    character.width = 20;
                    character.height = 50;
                    character.velocity = 0;
                    character.gravity = 1;
                    character.jumpForce = -15;
                    obstacles = [];
                    powerUps = [];
                    score = 0;
                    gameOver = false;
                    isJumping = false;
                    jumpHeight = 350;
                    jumpDuration = 0.5;
                    jumpStartTime = 0;
                    powerUpDuration = 10000; // 10 seconds
                    currentLevel = 1;
                    obstacleSpeed = 5;
                    powerUpSpeed = 3;
                    obstacleSpawnChance = 0.01;
                    powerUpSpawnChance = 0.04;
                    highScore = 0; // Initialize high score
                    leaderboardData = [];
                    startGame()
                })


                function startGame(params)
                {

                    // Game loop
                    function gameLoop(timestamp)
                    {
                        // Clear the canvas
                        ctx.clearRect(0, 0, canvas.width, canvas.height);

                        if (!gameOver)
                        {
                            // Handle jump
                            if (isJumping)
                            {
                                const elapsedTime = (timestamp - jumpStartTime) / 1000;
                                if (elapsedTime < jumpDuration)
                                {
                                    character.y = canvas.height - 50 - jumpHeight * Math.sin((elapsedTime / jumpDuration) * Math.PI);
                                } else
                                {
                                    isJumping = false;
                                    character.y = canvas.height - 50;
                                }
                            }


                            // Draw character
                            ctx.save();
                            ctx.font = '58px Arial';
                            ctx.translate(200, 0);
                            ctx.scale(-1, 1);
                            ctx.fillText('🚙', 100, character.y);
                            ctx.restore();

                            // Move and draw the obstacles
                            obstacles.forEach((obstacle, index) =>
                            {
                                obstacle.x -= obstacleSpeed;
                                ctx.save();
                                ctx.font = '50px Arial';
                                ctx.fillText(`🔥`, obstacle.x, obstacle.y);
                                ctx.restore();

                                // Check for collision
                                if (
                                    obstacle.x <= 50 + character.width &&
                                    obstacle.x + obstacle.width >= 50 &&
                                    obstacle.y <= character.y + character.height &&
                                    obstacle.y + obstacle.height >= character.y
                                )
                                {
                                    gameOver = true;
                                    gameOvered()
                                }

                                // Remove obstacle if it goes off-screen
                                if (obstacle.x + obstacle.width < 0)
                                {
                                    obstacles.splice(index, 1);
                                    score++;

                                    // Increase difficulty when a certain score threshold is reached
                                    if (score % 10 === 0)
                                    {
                                        currentLevel++;
                                        obstacleSpeed += 1;
                                        powerUpSpeed += 0.5;
                                        obstacleSpawnChance += 0.01;
                                        powerUpSpawnChance += 0.06;
                                    }
                                }
                            });

                            // Move and draw the power-ups
                            powerUps.forEach((powerUp, index) =>
                            {
                                powerUp.x -= powerUpSpeed;
                                ctx.font = '38px Arial';
                                ctx.fillText(`🪙`, powerUp.x, powerUp.y);

                                // Check for power-up collection
                                if (
                                    powerUp.x <= 50 + character.width &&
                                    powerUp.x + powerUp.width >= 50 &&
                                    powerUp.y <= character.y + character.height &&
                                    powerUp.y + powerUp.height >= character.y
                                )
                                {
                                    powerUps.splice(index, 1);
                                    let result = tapCount += zeropoint;
                                    tapCountDisplay.textContent = result.toFixed(3);
                                    tapCountDisplay.classList.add('animate');

                                    setTimeout(() =>
                                    {
                                        tapCountDisplay.classList.remove('animate');
                                    }, 500);

                                    const tapAnimation = document.createElement('div');
                                    tapAnimation.classList.add('tap-animation');
                                    tapAnimation.textContent = '1';
                                    tapAnimation.style.left = powerUp.x + 'px';
                                    tapAnimation.style.top = powerUp.y + 80 + 'px';
                                    document.body.appendChild(tapAnimation);

                                    setTimeout(() =>
                                    {
                                        tapAnimation.remove();
                                    }, 500);

                                    // sendTapCountToServer(result);
                                }

                                // Remove power-up if it goes off-screen
                                if (powerUp.x + powerUp.width < 0)
                                {
                                    powerUps.splice(index, 1);
                                }
                            });

                            // Add a new obstacle periodically
                            if (Math.random() < 0.01)
                            {
                                obstacles.push({
                                    x: canvas.width,
                                    y: canvas.height - 50,
                                    width: 10,
                                    height: Math.floor(Math.random() * (60)) + 20,
                                });
                            }

                            // Add a new power-up periodically
                            if (Math.random() < powerUpSpawnChance)
                            {
                                powerUps.push({
                                    x: canvas.width,
                                    y: 550,
                                    width: 25,
                                    height: 25,
                                });
                            }

                            requestAnimationFrame(gameLoop);
                        } else
                        {
                            gameOver = true;
                            gameOvered();
                        }
                        ctx.font = '24px Arial';
                        ctx.fillText(`Level: ${ currentLevel }`, 10, 60);

                        // Game over
                        function gameOvered()
                        {
                            console.log(gameOver, 'ggggggggg');
                            ctx.font = '48px Arial';
                            ctx.fillText(`${ score }🔥`, canvas.width / 2 - 12, canvas.height / 2);
                            setTimeout(() =>
                            {
                                // canvas.style.display = 'none';
                                play_page.style.display = 'block';
                                playCanvas()
                            }, 5000)
                        }


                        // Handle jump input
                        canvas.addEventListener('click', (event) =>
                        {
                            if (!isJumping)
                            {
                                isJumping = true;
                                jumpStartTime = performance.now();
                            }
                        });

                    }

                    // Load SVG icons
                    const characterIcon = new Image();
                    characterIcon.src = 'aflogo.png'
                    // characterIcon.src = "data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-13.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm-6 0c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm3 10c3.31 0 6-2.69 6-6 0-.79-.15-1.56-.44-2.22l-2.76 2.76c.03.18.05.37.05.57 0 1.66-1.34 3-3 3s-3-1.34-3-3c0-.2.02-.39.05-.57l-2.76-2.76c-.29.66-.44 1.43-.44 2.22 0 3.31 2.69 6 6 6z'/%3E%3C/svg%3E";

                    const obstacleIcon = new Image();
                    obstacleIcon.src = 'aflogo.png';
                    // obstacleIcon.src = "data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14.5V7c0-.41-.34-.75-.75-.75s-.75.34-.75.75v10.5c0 .41.34.75.75.75s.75-.34.75-.75z'/%3E%3C/svg%3E";

                    // Start the game
                    gameLoop(performance.now());

                }
            }
            playCanvas();
        </script>
    </body>

</html>